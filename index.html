<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black Opal Chat</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/themes.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="theme-black-opal">
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-content">
                <div class="logo-container">
                    <img src="assets/logo.png" alt="Black Opal Chat" class="loading-logo">
                </div>
                <div class="loading-spinner"></div>
                <p>Connecting to Black Opal Chat...</p>
            </div>
        </div>

        <!-- Login/Register Screen -->
        <div id="auth-screen" class="auth-screen hidden">
            <div class="auth-container">
                <div class="auth-header">
                    <img src="assets/logo.png" alt="Black Opal Chat" class="auth-logo">
                    <h1>Black Opal Chat</h1>
                    <p>Connect with your friends in style</p>
                </div>
                
                <div class="auth-forms">
                    <!-- Login Form -->
                    <div id="login-form" class="auth-form active">
                        <h2>Welcome Back</h2>
                        <form id="loginForm">
                            <div class="input-group">
                                <label for="loginUsername">Username</label>
                                <input type="text" id="loginUsername" required>
                            </div>
                            <div class="input-group">
                                <label for="loginPassword">Password</label>
                                <input type="password" id="loginPassword" required>
                            </div>
                            <button type="submit" class="btn-primary">Login</button>
                        </form>
                        <p class="auth-switch">Don't have an account? <a href="#" id="showRegister">Sign up</a></p>
                    </div>

                    <!-- Register Form -->
                    <div id="register-form" class="auth-form">
                        <h2>Create Account</h2>
                        <form id="registerForm">
                            <div class="input-group">
                                <label for="regUsername">Username</label>
                                <input type="text" id="regUsername" required>
                            </div>
                            <div class="input-group">
                                <label for="regDisplayName">Display Name</label>
                                <input type="text" id="regDisplayName" required>
                            </div>
                            <div class="input-group">
                                <label for="regEmail">Email</label>
                                <input type="email" id="regEmail" required>
                            </div>
                            <div class="input-group">
                                <label for="regPassword">Password</label>
                                <input type="password" id="regPassword" required>
                            </div>
                            <button type="submit" class="btn-primary">Create Account</button>
                        </form>
                        <p class="auth-switch">Already have an account? <a href="#" id="showLogin">Login</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Chat Interface -->
        <div id="main-interface" class="main-interface hidden">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <div class="server-info">
                        <img src="assets/logo.png" alt="Server" class="server-icon">
                        <span class="server-name">Black Opal Chat</span>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="sidebar-nav">
                    <div class="nav-item active" data-section="general">
                        <i class="fas fa-hashtag"></i>
                        <span>General Chat</span>
                    </div>
                    <div class="nav-item" data-section="events">
                        <i class="fas fa-calendar"></i>
                        <span>Events</span>
                        <div class="event-indicator" id="eventIndicator"></div>
                    </div>
                    <div class="nav-item" data-section="leaderboard">
                        <i class="fas fa-trophy"></i>
                        <span>Leaderboard</span>
                    </div>
                </div>

                <!-- Direct Messages -->
                <div class="dm-section">
                    <div class="dm-header">
                        <span>Direct Messages</span>
                        <button class="dm-add-btn" id="addDmBtn">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="dm-list" id="dmList">
                        <!-- DM conversations will be populated here -->
                    </div>
                </div>

                <!-- User Panel -->
                <div class="user-panel">
                    <div class="user-info">
                        <div class="user-avatar" id="userAvatar">
                            <img src="assets/default-avatar.png" alt="User Avatar">
                            <div class="status-indicator online"></div>
                        </div>
                        <div class="user-details">
                            <div class="user-name" id="userName">Loading...</div>
                            <div class="user-status" id="userStatus">Online</div>
                        </div>
                    </div>
                    <div class="user-controls">
                        <button class="control-btn" id="settingsBtn" title="Settings">
                            <i class="fas fa-cog"></i>
                        </button>
                        <button class="control-btn" id="themeBtn" title="Change Theme">
                            <i class="fas fa-palette"></i>
                        </button>
                        <button class="control-btn" id="logoutBtn" title="Logout">
                            <i class="fas fa-sign-out-alt"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- General Chat -->
                <div id="general-section" class="content-section active">
                    <div class="chat-header">
                        <div class="channel-info">
                            <i class="fas fa-hashtag"></i>
                            <span class="channel-name">general</span>
                            <span class="channel-description">Main chat for everyone</span>
                        </div>
                        <div class="chat-controls">
                            <button class="control-btn" id="clearChatBtn" title="Clear Chat (Owner Only)">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="chat-messages" id="chatMessages">
                        <!-- Messages will be populated here -->
                    </div>
                    
                    <div class="chat-input-container">
                        <div class="chat-input-wrapper">
                            <input type="text" id="messageInput" placeholder="Message #general" maxlength="2000">
                            <button id="sendBtn" class="send-btn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <div class="typing-indicator" id="typingIndicator"></div>
                    </div>
                </div>

                <!-- Events Section -->
                <div id="events-section" class="content-section">
                    <div class="events-header">
                        <h2>Server Events</h2>
                        <button id="createEventBtn" class="btn-primary owner-only">Create Event</button>
                    </div>
                    <div class="events-container" id="eventsContainer">
                        <!-- Events will be populated here -->
                    </div>
                </div>

                <!-- Leaderboard Section -->
                <div id="leaderboard-section" class="content-section">
                    <div class="leaderboard-header">
                        <h2>Server Leaderboard</h2>
                        <div class="leaderboard-controls owner-only">
                            <button id="setLoserBtn" class="btn-danger">Set Loser of the Week</button>
                        </div>
                    </div>
                    <div class="leaderboard-container" id="leaderboardContainer">
                        <!-- Leaderboard will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Members List -->
            <div class="members-sidebar">
                <div class="members-header">
                    <span>Members</span>
                    <span class="member-count" id="memberCount">0</span>
                </div>
                <div class="members-list" id="membersList">
                    <!-- Members will be populated here -->
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settingsModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>User Settings</h2>
                    <button class="modal-close" id="closeSettings">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="settings-tabs">
                        <button class="tab-btn active" data-tab="profile">Profile</button>
                        <button class="tab-btn" data-tab="appearance">Appearance</button>
                        <button class="tab-btn owner-only" data-tab="admin">Admin</button>
                    </div>
                    
                    <div class="settings-content">
                        <!-- Profile Settings -->
                        <div id="profile-tab" class="tab-content active">
                            <div class="setting-group">
                                <label for="settingsUsername">Username</label>
                                <input type="text" id="settingsUsername">
                            </div>
                            <div class="setting-group">
                                <label for="settingsDisplayName">Display Name</label>
                                <input type="text" id="settingsDisplayName">
                            </div>
                            <div class="setting-group">
                                <label for="settingsStatus">Status Message</label>
                                <input type="text" id="settingsStatus" placeholder="What's on your mind?">
                            </div>
                            <button class="btn-primary" id="saveProfileBtn">Save Changes</button>
                        </div>

                        <!-- Appearance Settings -->
                        <div id="appearance-tab" class="tab-content">
                            <div class="setting-group">
                                <label>Theme</label>
                                <div class="theme-selector">
                                    <div class="theme-option" data-theme="black-opal">
                                        <div class="theme-preview black-opal-preview"></div>
                                        <span>Black Opal</span>
                                    </div>
                                    <div class="theme-option" data-theme="dark">
                                        <div class="theme-preview dark-preview"></div>
                                        <span>Dark</span>
                                    </div>
                                    <div class="theme-option" data-theme="light">
                                        <div class="theme-preview light-preview"></div>
                                        <span>Light</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Admin Settings -->
                        <div id="admin-tab" class="tab-content owner-only">
                            <div class="setting-group">
                                <h3>Owner Commands</h3>
                                <div class="admin-controls">
                                    <button class="btn-danger" id="kickUserBtn">Kick User</button>
                                    <button class="btn-warning" id="muteUserBtn">Mute User</button>
                                    <button class="btn-primary" id="broadcastBtn">Server Broadcast</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- DM Modal -->
        <div id="dmModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Start Direct Message</h2>
                    <button class="modal-close" id="closeDm">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="user-search">
                        <input type="text" id="dmUserSearch" placeholder="Search for a user...">
                        <div class="search-results" id="dmSearchResults"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/database.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/events.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/themes.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
